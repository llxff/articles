Использование Webpack/Gulp в Rails
==================================

В последние годы в мире Frontend разработки наступил настоящий золотой век и прогресс растет сумасшедшими темпами. Появление огромного количества всевозможных фреймворков, библиотек, интрументов, а также качественный скачек в самой Frontend разработке открыли нам не только огромное количество возможностей, но и так же наложили некоторые требования на среду разработки. ==**Какие?**==

Очень долгое время Sprockets был единственным инструментом для сборки Frontend части приложения на Ruby on Rails. C появлением Grunt, потом Gulp и Webpack многие начали пользовать их совместно с Sprockets, но мы решили пойти дальше и заменили Sprockets полностью.

### Когда стоит использовать системы сборки вместо Sprockets

*Пока поток сознания, приведу в нормальный вид чуть позже*

Когда есть жесткие требования к скорости загрузки проекта, к контролю размеров сборок стилей и JS кода.
К примеру связка Webpack - postcss - css-modules - babel ... позволяет писать код с использованием последних возможностей JS. При этом не задумываться о конечной сборке, так как при сборке автоматически выпиливаются все не используемые куски кода, все не используемые стили, и в конечную сборку попадает только то что нужно, в минимально возможном размере.

Когда хочется быть всегда на острие разработки.

Ведь как бы не старались быстро развиваться рельсы, это все же большей частью бэкенд. И фронтенд часть, не всегда имеет доступ к последним наработкам в этом мире. В отличие от различных JS библиотек для сборки проекта, ведь они пишутся фронтенд-разработчиками для фронтенд разработчиков.

Когда хочется разрабатывать фронтенд в максимально комфортных условиях, а значит с большей производительностью. Используя такие инструмены как hot reload к примеру.

Когда реализуется очень специфический фронтенд, в котором есть вероятность что придется использовать свои наработки фронтенд разработчиков. Т.к. в этом случае они могут сами написать необходимые библиотеки, которые понадобятся в разработке, расширить функционал инструментов.

Когда фронтенд часть полностью отрезана от бэкенда, и общается с ним только по АПИ. Так же имеет смысл пользоваться другими системами сборки.

### Когда стоит остаться на Sprockets

Несмотря на огромные возможности Webpack, мы должны признать, что Sprockets так же является отличным инструментом сборки ассетов для Rails приложения. А если учесть, что  он работает из коробки, его простота настройки и привычность всем Ruby/Rails разработчикам, поддержка в 4ой версии ES6 и [Babel](https://github.com/rails/sprockets/blob/master/UPGRADING.md), делает Sprockets хорошим выбором для огромного количества проектов различной сложности и однознычным выбором для тех проектов, где нет какой-то сложной Frontend части.

### Настройка

Если вы создаете новый проект, то можно воспользоваться параметром `--skip-sprockets`. С помощью этого параметра Sprockets будут убраны из загрузки и его параметров не будет в настройках environments. Разницу при генерации с этим параметром можно посмотреть [здесь](https://github.com/llxff/webpack-rails-demo/pull/2).

#### Структура проекта

В своих проектах мы решили, что папку assets лучше вынести из app в корень проекта. Таким образом, структура приложения может быть такой:

```
project
├── app
├── assets
│   ├── fonts
│   ├── incons
│   ├── images
│   ├── javascripts
│   │   ├── shared
│   │   ├── index.js
│   ├── stylesheets
│   │   ├── base
│   │   ├── helpers
│   │   ├── shared
│   │   ├── main.css

...
```

### Вывод
